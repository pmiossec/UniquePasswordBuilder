!function(){function e(){if(url.value){var e=url.value;l.test(url.value)&&(e=l.exec(url.value)[0]),a({url:e,settings:{algorithmInput:algorithmInput.value,difficulty:difficultyScryptInput.value,difficultyArgon2:difficultyArgon2Input.value,usersalt:usersaltInput.value,hideSensitiveData:hideSensitiveData.checked,passwordWithNumbers:isChecked(passwordWithNumbers),passwordWithLetters:isChecked(passwordWithLetters),passwordWithSpecialChars:isChecked(passwordWithSpecialChars),passwordLength:passwordLength.value}}),s()}}function t(){var e=localStorage.domains;return e=e?JSON.parse(e):[]}function i(e,t){return function(e,t,i){if(i>=e.length)for(var a=i-e.length+1;a--;)e.push(void 0);return e.splice(i,0,e.splice(t,1)[0]),e}(e,t,0)}function a(e){var a=t(),s=a.map(function(e){return e.url}).indexOf(e.url);-1!==s?(i(a,s),a[0]=e):a.unshift(e),localStorage.domains=JSON.stringify(a)}function s(){!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(u);var e=t(),i=0===e.length||hideSensitiveData.checked;d.style.display=i?"none":"block",i||e.map(function(e){if(e!=={}){var i=document.createElement("li"),n=document.createElement("a"),r=document.createElement("a");n.innerText=e.url,n.className="domain",r.innerText="remove",r.className="remove",n.addEventListener("click",function(e){url.value=e.url,algorithmInput.value=e.settings.algorithmInput,difficultyScryptInput.value=e.settings.difficulty,difficultyArgon2Input.value=e.settings.difficultyArgon2,usersaltInput.value=e.settings.usersalt,hideSensitiveData.checked=e.settings.hideSensitiveData,e.settings.passwordWithSpecialChars?checkButton(passwordWithSpecialChars):uncheckButton(passwordWithSpecialChars),e.settings.passwordWithNumbers?checkButton(passwordWithNumbers):uncheckButton(passwordWithNumbers),e.settings.passwordWithLetters?checkButton(passwordWithLetters):uncheckButton(passwordWithLetters),passwordLength.value=e.settings.passwordLength||16,a(e),s(),compute()}.bind(null,e),!1),r.addEventListener("click",function(e){var i=t(),a=i.map(function(e){return e.url}).indexOf(e.url);i.splice(a,1),localStorage.domains=JSON.stringify(i),s()}.bind(null,e),!1),i.appendChild(n),i.appendChild(r),u.appendChild(i)}})}var n=document.getElementById("displayInfos"),r=document.getElementById("infos"),o=function(e){e&&e.preventDefault(),r.classList.remove("hidden"),n.classList.add("hidden")};-1!==window.location.hash.indexOf("pwa")?(r.classList.add("hidden"),n.classList.remove("hidden")):o();save=function(){localStorage.algorithm=algorithmInput.value,localStorage.difficulty=difficultyScryptInput.value,localStorage.difficultyArgon2=difficultyArgon2Input.value,localStorage.usersalt=usersaltInput.value,localStorage.hideSensitiveData=hideSensitiveData.checked,localStorage.passwordWithSpecialChars=isChecked(passwordWithSpecialChars),localStorage.passwordWithNumbers=isChecked(passwordWithNumbers),localStorage.passwordWithLetters=isChecked(passwordWithLetters),localStorage.passwordLength=passwordLength.value,localStorage.options=!optionsDiv.classList.contains("hidden")};n.addEventListener("click",o,!1),document.getElementById("copyBookmarkletToClipboard").addEventListener("click",function(){var e="javascript:(function(){"+("argon2"===algorithmInput.value?"window.uniquePasswordBuilderAlgorithm='argon2';window.uniquePasswordBuilderDifficulty='"+difficultyArgon2Input.value+"';window.salt='"+usersaltInput.value+"';window.argon2AsmPath='"+window.location.href+"';":"window.uniquePasswordBuilderAlgorithm='scrypt';window.uniquePasswordBuilderDifficulty='"+difficultyScryptInput.value+"';window.uniquePasswordBuilderKeyIndex='"+usersaltInput.value+"';")+"document.body.appendChild(document.createElement('script')).src='"+window.location.href+"upb.min.js';})();";copyTextToClipboard(e)},!1),algorithmInput.addEventListener("change",e,!1),urlInput.addEventListener("change",e,!1),difficultyScryptInput.addEventListener("change",e,!1),difficultyArgon2Input.addEventListener("change",e,!1),usersaltInput.addEventListener("change",e,!1),passwordWithNumbers.addEventListener("click",e,!1),passwordWithLetters.addEventListener("click",e,!1),passwordWithSpecialChars.addEventListener("click",e,!1),passwordLength.addEventListener("change",e,!1),decreaseLength.addEventListener("click",e,!1),increaseLength.addEventListener("click",e,!1),copyToClipboardBtn.addEventListener("click",e,!1);var l=/^https?:\/\/(?:[^\/?]+)/i;hideSensitiveData.addEventListener("change",s,!1);var d=document.querySelector("#domainsTitle"),u=document.querySelector("#domains");algorithmInput.value=localStorage.algorithm||UniquePasswordBuilder.SCRYPT,difficultyScryptInput.value=localStorage.difficulty||8192,hideSensitiveData.checked="true"===localStorage.hideSensitiveData,hideData(),localStorage.difficultyArgon2&&(difficultyArgon2Input.value=10|localStorage.difficultyArgon2),localStorage.usersalt&&(usersaltInput.value=localStorage.usersalt),"true"===localStorage.options&&optionsDiv.classList.remove("hidden"),"false"===localStorage.passwordWithSpecialChars&&toggleButton(passwordWithSpecialChars),"false"===localStorage.passwordWithNumbers&&toggleButton(passwordWithNumbers),"false"===localStorage.passwordWithLetters&&toggleButton(passwordWithLetters),localStorage.passwordLength&&(passwordLength.value=localStorage.passwordLength||16),changeAlgorithm(),s(),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(function(){console.log("service worker registration complete")},function(e){console.log("service worker registration failure:",e)})}();